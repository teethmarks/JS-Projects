<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Jukebox</title>
</head>
<body>
	
	<script>
	
	// Constructor Function
	var Song = function(title,artist,lyrics){
		this.title = title;
		this.artist = artist;
		this.lyrics = lyrics;
		this.playSong = function() {
			console.log("Now playing: " + this.title + " by " + this.artist);
			console.log(this.lyrics);
		};
	};
	// End Constructor Function

	// Current Song List
	var goodVibrations = new Song("Good Vibrations", "The Beach Boys", "I'm pickin' up good vibrations.");
	var hereComesTheSun = new Song("Here Comes The Sun", "The Beatles", "Here comes the sun and I say it's all right.");
	var daydreamBeliever = new Song("Daydream Believer", "The Monkees", "Cheer up, Sleepy Jean. Oh, what can it mean.");
	var houndDog = new Song("Hound Dog", "Elvis Presley", "You ain't nothin' but a hound dog cryin' all the time.");
	var dontBeCruel = new Song("Don't Be Cruel", "Elvis Presley", "I don't want no other love, Baby it's just you I'm thinking of.");
	// End Current Song List

	// Add Current Song List to Array
	var songs = [goodVibrations,hereComesTheSun,daydreamBeliever,houndDog,dontBeCruel]
	// End Add Current Song List to Array

	// Greet
	var userName;
	function startJukeBox(){
		userName = prompt("Welcome to the Tune Machine. Looks like you're ready to play some tunes! What's your name?","Bob");
	};
	// End Greet

	// Make Selection
	var userSelect;
	function makeSelection(){
		userSelect = prompt("Hi " + userName + "! Would you like to (A)dd a new song, (S)earch for an existing song, (P)lay all songs in the queue, or (Q)uit?").toLowerCase();

		if (userSelect === "a") {
			addSong();
		} else if (userSelect === "s") {
			searchForSong();
		} else if (userSelect === "p") {
			playSongs();
		} else if (userSelect === "q") {
			console.log ("Quitting? BYE!")
		} else {
			console.log("Invalid Entry. Bye!")
		}
	};
	// End Make Selection

	// Add Song
	var playQueue = [];
	function addSong(){
		var addTitle = prompt("What is the title of the song you'd like to add?");
		var addArtist = prompt("Artist Name?");
		var addLyrics = prompt("Lyrics?");
		var newSong = new Song(addTitle,addArtist,addLyrics);

		songs.push(newSong); // What will be the var name of this new entry?
		playQueue.push(newSong); // Don't really understand the need for this.

		console.log("Well done. " + addTitle + " has been added.");
	};
	// End Add Song

	// Search For Song
	function searchForSong(){
		var userSearch = prompt("Please enter a song or artist.").toLowerCase();
		var results = [];
		var song;
		var printableResults = "";

		// Loop through the songs array
		for (var i = 0; i < songs.length; i++) {

			// Find a match, if match found, push to array
			if (userSearch === songs[i].title.toLowerCase() || userSearch === songs[i].artist.toLowerCase()){
				results.push(songs[i]);
				song = songs[i];
			}

		};

		// One Song
		if (results.length === 1) {

			var oneResultaddSong = prompt("One song was found:\n" + song.title + "\n" + "Would you like to add this song to the queue? (Y)es or (N)o?").toLowerCase();

			if (oneResultaddSong === "y"){
				playQueue.push(song);
				console.log("Great choice, " + userName + "! " + song.title + " has been added.")
			}
		} 
		//End One Song

		// Multiple Songs
		else if (results.length > 1) {
			
			for (var i = 0; i < results.length; i++){
				printableResults += i + 1 + " " + results[i].title + " by " + results[i].artist + "\n"; // Didn't see this "+=" part coming.
			};
			
			var userSongSelect = prompt(results.length + " songs were found:\n\n" + printableResults + "\n" + "Please enter the number for the song you would like to add.");

			// Push user selection to playQueue
			userSongSelect = parseInt(userSongSelect-1);
			playQueue.push(results[userSongSelect]);

			console.log("Great choice, " + userName + "! " + results[userSongSelect].title + " has been added.");
		}
		// End Multiple Songs

		// No Songs
		else if (results.length === 0){
			var noResultAddSong = prompt("No songs match your query. Would you like to add a new song? (Y)es or (N)o?").toLowerCase();

			if(noResultAddSong === "y") {
				addSong();
			} else if (noResultAddSong === "n") {
				makeSelection();
			}
		}
		// End No Songs

	};
	// End searchForSong

	// Play Songs
	function playSongs(){
		for (var i = 0; i < playQueue.length; i++){
			console.log(playQueue[i].playSong());
		}
	};
	// End Play Songs

	// Keep Asking Until User Quits
	function keepAskingUntilQuit(){
		while (userSelect === "a" || userSelect === "s" || userSelect === "p") {
			makeSelection();
		}
	};
	// End Keep Asking Until User Quits

	startJukeBox();
	makeSelection();
	keepAskingUntilQuit();

	</script>

</body>
</html>